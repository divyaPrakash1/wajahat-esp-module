<xcdrs-activity-size-detector></xcdrs-activity-size-detector>
<div class="main-container">
  <div class="data-contanier">
    <div
      class="mine-activities-conatiner"
      fxLayout="column"
      fxLayoutAlign="start stretch"
      fxFlex
      *ngIf="dataLoaded && !isLoading"
    >
      <!-- start week progress-->
      
      <!-- *ngIf="!((SourceSystemId && !teamId) || (!SourceSystemId && teamId))" -->
      <div fxFlex fxLayout="row" fxLayoutAlign="start start"
        *ngIf="!((SourceSystemId && !teamId) || (!SourceSystemId && teamId) || (SourceSystemId && teamId))"
  >
    <!-- <mat-card
      fxFlex
      fxLayout="row"
      fxLayoutAlign="start center"
      fxLayout.xs="column"
      fxLayoutAlign.xs="space-around stretch"
      fxLayout.sm="column"
      fxLayoutAlign.sm="space-around stretch"
      class="week-progress-card"
    >
      <div fxFlex="45" class="work-progress-span">
        <span
          >You worked
          <span
            class="hours-span"
            *ngIf="activitiesByGroup.weekDays.effortSumHours != null"
            >{{ activitiesByGroup.weekDays.effortSumHours }} hours</span
          >
          <span
            *ngIf="
              activitiesByGroup.weekDays.effortSumHours != null &&
              activitiesByGroup.weekDays.effortSumMinutes != null
            "
          >
            and
          </span>
          <span
            class="hours-span"
            *ngIf="activitiesByGroup.weekDays.effortSumMinutes != null"
            >{{ activitiesByGroup.weekDays.effortSumMinutes }} minutes</span
          >
          this week</span
        >
      </div>
      <div fxFlex>
        <div
          fxFlex
          *ngFor="
            let day of activitiesByGroup.weekDays.days;
            let last = last;
            let first = first
          "
          fxLayout="row"
          fxLayoutAlign="end center"
          fxLayout.xs="column-reverse"
          fxLayoutAlign.xs="space-around stretch"
          fxLayout.sm="column-reverse"
          fxLayoutAlign.sm="space-around stretch"
        >
          <div fxFlex>
            <mat-label>{{ day.date }}</mat-label>
          </div>
          <div
            fxFlex
            class="circle-progress-container"
            [ngClass]="{ last: last, first: 'first' }"
          >
            <circle-progress
              [title]="day.effortSum"
              [percent]="day.effortSumPercent"
              [titleColor]="
                day.effortSum == 0 || day.effortSum == null
                  ? '#aaadb8'
                  : '#00a3ff'
              "
            ></circle-progress>
          </div>
        </div>
      </div>
    </mat-card> -->
    <mat-card fxFlex fxLayout="row" class="week-progress-card">
      <div fxFlex="50%" fxFlex fxLayout="column">
        <span (click)="onDashboardClick()" class="title reverseing" *ngIf="!isArabic">
          {{ graphTitle }}
        </span>
        <span (click)="onDashboardClick()" class="title reverseing" *ngIf="isArabic">
          {{ arabicTitle }}
        </span>
        <span (click)="onDashboardClick()" class="subtitle"
          >{{ graphSubTitle }}
        </span>
        <div
          class="row"
          fxFlex="50%"
          style="align-items: flex-end"
          class="custom-flex-box"
        >
          <div style="align-items: center">
            <img src="../../../assets/images/icon-input-time.svg" class="effortsbg" />
            <div fxFlex fxLayout="column">
              <span class="label">{{'Efforts' | translate}}</span>
              <span
                class="value display-line"
                style="color: #6cb33f"
                *ngIf="isDashboardClicked && graphData?.EffortSumHr"
                >{{ graphData?.EffortSumHr | numberPipe }}{{'HR' | translate}}</span
              >
              <span
                class="value display-line"
                style="color: #6cb33f"
                *ngIf="isDashboardClicked"
                >{{ graphData?.EffortSumMin | numberPipe }}{{'MIN' | translate}}</span
              >
              <span
                class="value display-line"
                style="color: #6cb33f"
                *ngIf="!isDashboardClicked && graphData?.EffortSumTodayHr"
                >{{ graphData?.EffortSumTodayHr | numberPipe }}{{'HR' | translate}}</span
              >
              <span
                class="value display-line"
                style="color: #6cb33f"
                *ngIf="!isDashboardClicked"
                >{{ graphData?.EffortSumTodayMin | numberPipe }}{{'MIN' | translate}}</span
              >
            </div>
          </div>
          <div style="align-items: center">
            <img
              src="../../../assets/images/icon-menu-activities-1.svg"
              class="in-progress"
            />
            <div fxFlex fxLayout="column">
              <span class="label">{{'Done' | translate }}</span>
              <span class="value" style="color: #00aeef">{{ close | numberPipe}}</span>
            </div>
          </div>
          <div style="align-items: center">
            <img
              src="../../../assets/images/icon-menu-activities.svg"
              class="activitybg"
            />
            <div fxFlex fxLayout="column">
              <span class="label">{{'Open' | translate }}</span>
              <span class="value" style="color: #f8971d">{{open | numberPipe}}</span>
            </div>
          </div>
          <!-- <div style="align-items: center" *ngIf="overDue > 0 && open == 0">
            <img src="../../../assets/images/icon-other-error.svg" class="duebg" />
            <div fxFlex fxLayout="column">
              <span class="label">Overdue</span>
              <span class="value" style="color: #e21d26">{{ overDue }}</span>
            </div>
          </div> -->
          <!-- <div style="align-items: center" *ngIf="open > 0 && close == 0">
            <img
              src="../../../assets/images/icon-menu-activities-1.svg"
              class="in-progress"
            />
            <div fxFlex fxLayout="column">
              <span class="label">In Progress</span>
              <span class="value" style="color: #00aeef">{{ open }}</span>
            </div>
          </div> -->
        </div>
      </div>
      <div fxFlex="50%" class="graph-width">
        <xcdrs-week-graph
          *ngIf="!isWeekLoading"
          id="effieciency-chart"
          [indicators]="indicators"
          [effieciency]="true"
          [weekIdx]="0"
        ></xcdrs-week-graph>
        <div class="row graph-table">
          <mat-icon
            [ngClass]="{ 'left-arrow': !previous }"
            mwlCalendarPreviousView
            [view]="view"
            [(viewDate)]="viewDate"
            style="cursor: pointer"
            (click)="onChangeWeek('previous')"
            >keyboard_arrow_left</mat-icon
          >
          <mwl-calendar-week-view
            [viewDate]="viewDate"
            [refresh]="refresh"
            [locale]="!isArabic ? 'en' : 'ar'"
            class="inner-table"
            (dayHeaderClicked)="dayHeaderClicked($event)"
            [ngClass]="{ weekContainer: isDashboardClicked }"
          >
          </mwl-calendar-week-view>
          <mat-icon
            [ngClass]="{ 'left-arrow': !next }"
            mwlCalendarNextView
            [view]="view"
            [(viewDate)]="viewDate"
            style="cursor: pointer"
            (click)="onChangeWeek('next')"
            >keyboard_arrow_right</mat-icon
          >
        </div>
      </div>
    </mat-card>
  </div>
  
      <!-- end week progress-->
    
      <!-- start crad slider & srearch-->
      <div
        class="stacked-cards-container"
        *ngIf="activitiesByGroup.newAssigned.length > 0  && !((SourceSystemId && !teamId) || (!SourceSystemId && teamId) || (SourceSystemId && teamId))"
        fxFlex
        fxLayout="column"
        fxLayoutAlign="start stretch"
      >
        <xcdrs-carousel
          [listItems]="activitiesByGroup.newAssigned"
          [listType]="'assigned'"
          (activity)="addActivityToMine($event)"
        ></xcdrs-carousel>
      </div>
      <div
        fxFlex
        fxLayout="row"
        fxLayoutAlign="start start"
        class="actions-container"
      >
        <div fxFlex fxLayout="row" fxLayoutAlign="start center">
          <xcdrs-search-field (search)="onSearch($event)"></xcdrs-search-field>
          <span
            class="epm-setting-icon-container"
            (click)="openEPMSettingsDialog()" *ngIf="!((SourceSystemId && !teamId) || (!SourceSystemId && teamId) || (SourceSystemId && teamId))"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <g fill="none" fill-rule="evenodd">
                <g>
                  <path d="M0 0L24 0 24 24 0 24z" />
                  <path
                    fill="#AAADB8"
                    d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74 0-.2.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"
                  />
                </g>
              </g>
            </svg>
          </span>
          <!-- *ngIf="isDefultFilterApplied" -->
          <div class="combined-filter-active-dot">
          <div class="defult-filter"></div>
          <span
            class="filter-icon-container"
            (click)="openFiltersDialog()"
            [ngClass]="{ disabled: groupByAppliedFilter == 5 }"
          >
            <!-- *ngIf="isDefultFilterApplied" -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <g fill="none" fill-rule="evenodd">
                <path d="M0 0H24V24H0z" />
                <path
                  fill="#AAADB8"
                  d="M10.071 11.56c.17.183.263.422.263.669v7.276c0 .437.532.66.848.352l2.046-2.326c.274-.326.425-.487.425-.81v-4.49c0-.247.095-.486.262-.669l5.873-6.32c.44-.473.1-1.242-.55-1.242H4.748c-.65 0-.99.767-.549 1.243l5.872 6.317z"
                />
              </g>
            </svg>
            <!-- <svg
              *ngIf="!isDefultFilterApplied"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <g fill="none" fill-rule="evenodd">
                <path d="M0 0H24V24H0z" />
                <path
                  fill="#6cb33f"
                  d="M10.071 11.56c.17.183.263.422.263.669v7.276c0 .437.532.66.848.352l2.046-2.326c.274-.326.425-.487.425-.81v-4.49c0-.247.095-.486.262-.669l5.873-6.32c.44-.473.1-1.242-.55-1.242H4.748c-.65 0-.99.767-.549 1.243l5.872 6.317z"
                />
              </g>
            </svg> -->
          </span>
        </div>
    
          <span class="more-icon-container" *ngIf="!((SourceSystemId && !teamId) || (!SourceSystemId && teamId) || (SourceSystemId && teamId))">
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu" class="more-menu">
              <button
                mat-menu-item
                fxFlex
                fxLayout="row"
                fxLayoutAlign="space-between center"
              >
                <mat-checkbox [(ngModel)]="showImportant" (change)="showOptions($event)"
                  >{{'Show-Important-First' | translate }}</mat-checkbox
                >
                <span fxFlex="nogrow" class="material-icons"> {{'flag' | translate}} </span>
              </button>
              <button mat-menu-item class="disabled-item" disabled>
                <span>{{'Grouping' | translate }}</span>
              </button>
              <button
                mat-menu-item
                (click)="applyGrouping(option)"
                *ngFor="let option of !isArabic ? groupByOptions : arabicGroupByOptions"
              >
                <mat-radio-group [(ngModel)]="groupByAppliedFilter">
                  <mat-radio-button
                    [checked]="groupByAppliedFilter == option.id"
                    [value]="option.id"
                    (change)="applyGrouping(option)"
                  >
                    {{ option.name }}
                  </mat-radio-button>
                </mat-radio-group>
              </button>
            </mat-menu>
            <!-- <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <g fill="none" fill-rule="evenodd">
                <rect width="24" height="24" fill="#FFF" fill-opacity="0" rx="4" />
                <path
                  fill="#AAADB8"
                  d="M12 16c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"
                />
              </g>
            </svg> -->
          </span>
        </div>
    
        <div fxFlex="nogrow">
          <button
            fxFlex="nogrow"
            fxHide.xs
            fxHide.sm
            class="add-action-btn gradient-btn"
            mat-flat-button
            color="primary"
            type="submit"
            (click)="openCreateDialog('new', 'task')"
            *ngIf="!isOppProEnabled"
          >
            {{ 'FEEDBACK.ADD-TITLE' | translate }}
          </button>
          <button
            fxFlex="nogrow"
            fxHide.xs
            fxHide.sm
            class="add-action-btn gradient-btn"
            mat-flat-button
            color="primary"
            type="submit"
            [matMenuTriggerFor]="addMenu"
            *ngIf="isOppProEnabled"
          >
            {{ 'ADD' | translate }}
          </button>
    
          <mat-menu #addMenu="matMenu" [overlapTrigger]="false" class="add-menu">
            <button  class="svg-align-cls"
              fxFlex
              fxLayout="row"
              fxLayoutAlign="start center"
              mat-menu-item
              (click)="openCreateDialog('new', type.name)"
              *ngFor="let type of activityTypes; let last = last"
              [ngClass]="{ last: last }"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                *ngIf="type.id == 0"
              >
                <defs>
                  <filter
                    id="a4qdhyfl7a"
                    width="196.1%"
                    height="188.7%"
                    x="-48.1%"
                    y="-44.4%"
                    filterUnits="objectBoundingBox"
                  >
                    <feOffset dy="5" in="SourceAlpha" result="shadowOffsetOuter1" />
                    <feGaussianBlur
                      in="shadowOffsetOuter1"
                      result="shadowBlurOuter1"
                      stdDeviation="20"
                    />
                    <feColorMatrix
                      in="shadowBlurOuter1"
                      result="shadowMatrixOuter1"
                      values="0 0 0 0 0.777579312 0 0 0 0 0.787937264 0 0 0 0 0.822463768 0 0 0 0.6 0"
                    />
                    <feMerge>
                      <feMergeNode in="shadowMatrixOuter1" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>
                <g
                  fill="none"
                  fill-rule="evenodd"
                  filter="url(#a4qdhyfl7a)"
                  transform="translate(-16 -12)"
                >
                  <g>
                    <path d="M0 0L24 0 24 24 0 24z" transform="translate(16 12)" />
                    <path
                      fill="#6CB33F"
                      d="M8 15h5c.552 0 1 .448 1 1s-.448 1-1 1H8c-.552 0-1-.448-1-1s.448-1 1-1zm0-4h8c.552 0 1 .448 1 1s-.448 1-1 1H8c-.552 0-1-.448-1-1s.448-1 1-1zm0-4h8c.552 0 1 .448 1 1s-.448 1-1 1H8c-.552 0-1-.448-1-1s.448-1 1-1zm11-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"
                      transform="translate(16 12)"
                    />
                  </g>
                </g>
              </svg>
    
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                *ngIf="type.id == 1"
              >
                <defs>
                  <filter
                    id="zy3iwd6jka"
                    width="196.1%"
                    height="188.7%"
                    x="-48.1%"
                    y="-44.4%"
                    filterUnits="objectBoundingBox"
                  >
                    <feOffset dy="5" in="SourceAlpha" result="shadowOffsetOuter1" />
                    <feGaussianBlur
                      in="shadowOffsetOuter1"
                      result="shadowBlurOuter1"
                      stdDeviation="20"
                    />
                    <feColorMatrix
                      in="shadowBlurOuter1"
                      result="shadowMatrixOuter1"
                      values="0 0 0 0 0.777579312 0 0 0 0 0.787937264 0 0 0 0 0.822463768 0 0 0 0.6 0"
                    />
                    <feMerge>
                      <feMergeNode in="shadowMatrixOuter1" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>
                <g
                  fill="none"
                  fill-rule="evenodd"
                  filter="url(#zy3iwd6jka)"
                  transform="translate(-16 -61)"
                >
                  <g>
                    <path d="M0 0L24 0 24 24 0 24z" transform="translate(16 61)" />
                    <path
                      fill="#6CB33F"
                      d="M16.983 12.529c-.692 0-1.346.293-1.884.83l-1.01 1.002-.135-.07c-.065-.033-.117-.062-.16-.089-1.185-.75-2.27-1.734-3.317-3.015-.367-.462-.643-.868-.858-1.261l1.01-1.011c1.13-1.125 1.13-2.662 0-3.787L9.172 3.673l-.441-.451-.309-.3-.149-.14C7.766 2.283 7.121 2 6.436 2c-.614 0-1.202.227-1.703.645l-.181.163-1.437 1.443c-.642.64-1.014 1.432-1.094 2.337-.094 1.136.13 2.187.577 3.389.711 1.911 1.77 3.673 3.333 5.543 1.907 2.267 4.2 4.057 6.819 5.317 1.45.684 2.629 1.07 3.944 1.153L17 22c1.15 0 2.134-.421 2.894-1.243l.035-.05.176-.19.308-.312.211-.204c.214-.203.395-.38.566-.559.523-.542.81-1.198.81-1.883 0-.695-.295-1.352-.835-1.884l-2.31-2.308c-.522-.54-1.175-.838-1.872-.838zM17 20l-.242-.009c-.903-.058-1.825-.335-3.154-.962-2.348-1.13-4.417-2.744-6.143-4.797-1.418-1.698-2.36-3.265-2.989-4.953-.385-1.034-.52-1.78-.458-2.526.038-.424.203-.777.513-1.085l1.404-1.41.142-.129c.094-.076.233-.129.363-.129.141 0 .287.063.433.206l.189.178.277.27.408.418 1.472 1.47c.347.346.347.612.002.956L7.147 9.57l.717 1.314c.274.5.613.999 1.047 1.546 1.194 1.46 2.437 2.59 3.814 3.461.105.065.196.117.3.171l1.445.737 2.038-2.022c.18-.18.335-.25.475-.25.134 0 .275.064.436.23l2.332 2.332c.182.179.249.33.249.469 0 .145-.071.31-.25.494l-.23.235-.496.478-.341.344-.318.343-.022.031c-.36.35-.788.516-1.343.516z"
                      transform="translate(16 61)"
                    />
                  </g>
                </g>
              </svg>
    
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                *ngIf="type.id == 2"
              >
                <defs>
                  <filter
                    id="n7jdutwvha"
                    width="196.1%"
                    height="188.7%"
                    x="-48.1%"
                    y="-44.4%"
                    filterUnits="objectBoundingBox"
                  >
                    <feOffset dy="5" in="SourceAlpha" result="shadowOffsetOuter1" />
                    <feGaussianBlur
                      in="shadowOffsetOuter1"
                      result="shadowBlurOuter1"
                      stdDeviation="20"
                    />
                    <feColorMatrix
                      in="shadowBlurOuter1"
                      result="shadowMatrixOuter1"
                      values="0 0 0 0 0.777579312 0 0 0 0 0.787937264 0 0 0 0 0.822463768 0 0 0 0.6 0"
                    />
                    <feMerge>
                      <feMergeNode in="shadowMatrixOuter1" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>
                <g
                  fill="none"
                  fill-rule="evenodd"
                  filter="url(#n7jdutwvha)"
                  transform="translate(-16 -110)"
                >
                  <g>
                    <path d="M0 0L24 0 24 24 0 24z" transform="translate(16 110)" />
                    <path
                      fill="#6CB33F"
                      d="M19.169 3.95h-.882V2.187h-1.762V3.95H7.71V2.187H5.948V3.95h-.882c-.97 0-1.763.793-1.763 1.763v14.102c0 .97.794 1.763 1.763 1.763H19.17c.97 0 1.763-.793 1.763-1.763V5.713c0-.97-.794-1.763-1.763-1.763zm0 15.865H5.066V10.12H19.17v9.695zm0-11.458H5.066V5.713H19.17v2.644z"
                      transform="translate(16 110)"
                    />
                  </g>
                </g>
              </svg>
    
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                *ngIf="type.id == 3"
              >
                <defs>
                  <filter
                    id="8943ana36a"
                    width="196.1%"
                    height="188.7%"
                    x="-48.1%"
                    y="-44.4%"
                    filterUnits="objectBoundingBox"
                  >
                    <feOffset dy="5" in="SourceAlpha" result="shadowOffsetOuter1" />
                    <feGaussianBlur
                      in="shadowOffsetOuter1"
                      result="shadowBlurOuter1"
                      stdDeviation="20"
                    />
                    <feColorMatrix
                      in="shadowBlurOuter1"
                      result="shadowMatrixOuter1"
                      values="0 0 0 0 0.777579312 0 0 0 0 0.787937264 0 0 0 0 0.822463768 0 0 0 0.6 0"
                    />
                    <feMerge>
                      <feMergeNode in="shadowMatrixOuter1" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>
                <g
                  fill="none"
                  fill-rule="evenodd"
                  filter="url(#8943ana36a)"
                  transform="translate(-16 -159)"
                >
                  <g>
                    <path d="M0 0L24 0 24 24 0 24z" transform="translate(16 159)" />
                    <path
                      stroke="#6CB33F"
                      d="M12 1.5c.504 0 .972.152 1.363.412.437.29.779.715.97 1.213l.064.19 4.594.185c.395-.002.757.151 1.027.402.228.211.391.492.454.808l.022.161L20.5 19c0 .392-.153.75-.402 1.018-.211.228-.492.391-.808.454l-.161.022-14.094.006c-.597-.087-.88-.222-1.082-.424-.103-.109-.195-.226-.267-.355l-.064-.133L3.5 5c0-.207.044-.4.122-.578.074-.18.187-.344.322-.478.153-.154.341-.279.551-.356l.162-.048 4.899-.043c.137-.632.508-1.18 1.018-1.542.404-.286.895-.455 1.426-.455zm0 .75c-.342 0-.655.14-.882.368-.228.227-.368.54-.368.882 0 .342.14.655.368.882.043.043.089.083.137.12L4.5 4.5v15h15v-15l-6.755.001c.048-.036.094-.076.137-.119.228-.227.368-.54.368-.882 0-.342-.14-.655-.368-.882-.195-.195-.453-.326-.737-.36h0zm.677 5l-.001 1.175c.576.097 1.045.336 1.372.682.117.123.215.26.293.407l.071.15-.738.26c-.08-.256-.202-.45-.359-.599-.27-.258-.668-.404-1.266-.404-.525 0-.936.11-1.222.276-.838 1.536-.477 1.675-.146 1.867l.075.046c.247.161.632.317 1.205.466 1.032.273 1.768.563 2.236.968.383.332.55.747.553 1.283-.002.38-.117.703-.33.964-.249.305-.622.522-1.079.662l-.2.055-.339 1.242h-1.388l-.001-1.154c-.684-.148-1.224-.387-1.597-.73-.125-.116-.23-.243-.315-.382l-.077-.142.748-.269c.108.268.268.474.476.633.317.243.77.38 1.409.38.56 0 .958-.106 1.228-.256.82-1.589.428-1.747.094-2.001-.252-.192-.643-.368-1.235-.515-1.02-.253-1.753-.542-2.225-.927-.385-.314-.563-.695-.563-1.173 0-.36.12-.68.335-.945.253-.312.63-.548 1.082-.7l.199-.06.328-1.259h1.377z"
                      transform="translate(16 159)"
                    />
                  </g>
                </g>
              </svg>
    
              <span> {{ type.name | translate}}</span>
            </button>
          </mat-menu>
        </div>
      </div>
    
      <!--start groups accordion-->
      <div
        fxFlex
        fxLayout="row"
        fxLayoutAlign="start start"
        *ngIf="isListViewActive"
      >
        <div
          fxFlex
          fxLayout="column"
          fxLayoutAlign="start stretch"
          class="groups-container"
          *ngIf="groupByAppliedFilter != 0 && groupByAppliedFilter != 5"
        >
          <div
            *ngIf="activitiesByGroup.groups.length > 0"
            fxFlex
            fxLayout="column"
            fxLayoutAlign="start stretch"
          >
            <xcdrs-activities-group
              *ngFor="let group of activitiesByGroup.groups; let i = index"
              [group]="group"
              [i]="i"
              [selectedFiltersIds]="selectedFiltersIds"
              [search]="search"
              [loggedInUserId]="loggedInUserId"
              [activeTab]="activeTab"
              [totalCount]="totalCount"
              [lastLoadedCount]="lastLoadedCount"
              [size]="size"
              [groupByAppliedFilter]="groupByAppliedFilter"
              [oppProData]="oppProData"
              [isOppProEnabled]="isOppProEnabled"
              (reloadList)="reload($event)"
              (selectedGroup)="selectedGroup($event)"
              [engProLoggedInUserId]="engProLoggedInUserId"
              [isEngProEnabled]="isEngProEnabled"
              [isWeekView] = "isWeekView"
            ></xcdrs-activities-group>
          </div>
          <div
          
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              !isLoading &&
              dataLoaded &&
              !isError &&
              activitiesByGroup.groups.length === 0 &&
              !isSearchMode()
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="''"
              [title]="'No-Activities-Available' | translate"
              [subTitle]="'It-Seems-No-Activites-Created-For-You-Yet' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
    
          <div
            fxFlex
            fxLayout="column"
            fxLayoutAlign="start stretch"
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              dataLoaded &&
              !isLoading &&
              isError &&
              activitiesByGroup.groups.length == 0
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="'../../../assets/images/ic_error.png'"
              [title]="'EMPTY-SCREEN.OOP-SOMETHING-WENT-WRONG' | translate"
              [subTitle]="'EMPTY-SCREEN.CHECK-YOUR-INTERNET-CONNECTION' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
    
          <div
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              dataLoaded &&
              !isLoading &&
              !isError &&
              activitiesByGroup.groups.length === 0 &&
              isSearchMode()
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="'../../../assets/images/news-item/no-items.svg'"
              [title]="'Activity-Not-Found' | translate"
              [subTitle]="'Maybe-Your-Search-Was-Too-Specific' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
        </div>
    
        <div
          fxFlex
          fxLayout="column"
          fxLayoutAlign="start stretch"
          class="ungrouped-container"
          *ngIf="
            groupByAppliedFilter == 0 ||
            (groupByAppliedFilter == 5 && isSearchMode())
          "
        >
          <xcdrs-activities-table
            fxFlex
            fxHide.xs
            fxHide.sm
            fxShow.gt-md
            fxShow.lt-xl
            fxShow.lg
            fxShow.lt-lg
            fxShow.md
            fxLayout="column"
            fxLayoutAlign="start stretch"
            *ngIf="activitiesByGroup.ungrouped.length > 0"
            [loggedInUserId]="loggedInUserId"
            [activeTab]="activeTab"
            [totalCount]="totalCount"
            [lastLoadedCount]="lastLoadedCount"
            (pageChange)="onPageChange($event, selectedFiltersIds)"
            [activities]="activitiesSubject.asObservable()"
            [oppProData]="oppProData"
            [espAddon]="espAddon"
            (reloadList)="reload($event)"
            [engProLoggedInUserId]="engProLoggedInUserId"
            [pageNo]="pageIndex - 1"
            [isESPcomponent]="isESPcomponent"
            [requestName]="requestName"
            [requestModuleName]="requestModuleName"
          >
          </xcdrs-activities-table>
          <div
            fxShow.xs
            fxShow.sm
            fxHide.gt-md
            fxHide.lt-xl
            fxHide.lg
            fxHide.lt-lg
            fxHide.md
            fxFlex
            fxLayout="column"
            fxLayoutAlign="start stretch"
            *ngIf="activitiesByGroup.ungrouped.length > 0"
          >
            <mat-card
              *ngFor="let activity of activitiesByGroup.ungrouped"
              fxFlex
              fxLayout="column"
              fxLayoutAlign="space-around stretch"
            >
              <mat-card-header
                class="card-header"
                fxFlex
                fxLayout="column"
                fxLayoutAlign="space-around stretch"
              >
                <mat-card-title
                  class="clickable"
                  (click)="openActivityDetails(activity)"
                >
                  {{ activity.description | textTruncate: 60 }}</mat-card-title
                >
              </mat-card-header>
    
              <mat-card-content
                fxFlex
                fxLayout="column"
                fxLayoutAlign="space-around stretch"
              >
                <p
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  *ngIf="!!activity.createdBy"
                >
                  <mat-label fxFlex="35">Assigned By: </mat-label>
                  <span>
                    {{
                      activity.createdBy.UserFirstName +
                        " " +
                        activity.createdBy.UserLastName
                    }}
                  </span>
                </p>
                <p
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  *ngIf="
                    activity.parentBoardId != null ||
                    (activity.appType == 3 &&
                      !!activity.epmInfo &&
                      !!activity.epmInfo.ParentProjectId != null)
                  "
                >
                  <mat-label fxFlex="35">{{'Project' | translate }}: </mat-label>
                  <span *ngIf="activity.parentBoardId != null">
                    {{ activity.parentBoardName }}
                  </span>
                  <span
                    *ngIf="
                      activity.appType == 3 &&
                      !!activity.epmInfo &&
                      !!activity.epmInfo.ParentProjectId != null
                    "
                  >
                    {{ activity.epmInfo.ParentProjectName }}
                  </span>
                </p>
                <p fxFlex fxLayout="row" fxLayoutAlign="start center">
                  <mat-label fxFlex="35"
                    ><span *ngIf="activity.appType != 2">{{'Due' | translate }} </span>{{'Settings-Page.Fields.DATE' | translate }}:
                  </mat-label>
                  <span
                    *ngIf="activity.dueDateLabel == 'Overdue'"
                    class="over-due"
                    >{{ activity.dueDate }}</span
                  >
                  <span *ngIf="activity.dueDateLabel != 'Overdue'">{{ 
                    activity.dueDate
                  }}</span>
                </p>
                <p
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  *ngIf="activity.appType == 4 && activity.requestNumber != null"
                >
                  <mat-label fxFlex="35">{{'REQUEST' | translate }} #: </mat-label>
                  <span>
                    {{ activity.requestNumber }}
                  </span>
                </p>
                <p
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  *ngIf="activity.appType == 4 && activity.requestName != null"
                >
                  <mat-label fxFlex="35">{{'REQUEST' | translate }} {{'NAME' | translate }}: </mat-label>
                  <span>
                    {{ activity.requestName }}
                  </span>
                </p>
                <p
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  *ngIf="activity.appType == 2"
                >
                  <mat-label fxFlex="35">{{'Time' | translate }}: </mat-label>
                  <span>{{ activity.oppProScheduleEndDate }}</span>
                  <span> - {{ activity.oppProScheduleEndDate }}</span>
                </p>
                <p fxFlex fxLayout="row" fxLayoutAlign="start center">
                  <span
                    fxFlex="35"
                    [ngStyle]="{
                      color: activity.progressStatusColor,
                      'font-weight': 'bold',
                      'white-space': 'nowrap'
                    }"
                  >
                    <span>{{ activity.progressStatus }}</span>
                  </span>
                  <span
                    fxFlex="15"
                    *ngIf="activity.score != null && activity.status != 4"
                    [ngClass]="{ done: activity.status == 2 }"
                    [ngStyle]="{
                      color:
                        activity.status == 2
                          ? '#AAADB8'
                          : activity.progressStatusColor,
                      'font-weight': 'bold',
                      'white-space': 'nowrap'
                    }"
                    >{{ activity.score }} %</span
                  >
                  <mat-progress-bar
                    *ngIf="activity.score != null && activity.status != 4"
                    [ngClass]="{ done: activity.status == 2 }"
                    fxFlex="40"
                    class="activity-progress"
                    [value]="activity.score"
                  ></mat-progress-bar>
                  <span fxFlex fxLayoutAlign="end center">
                    <span
                      *ngIf="activity.appType == 2"
                      [ngClass]="{
                        task: activity.oppProActivityType == 'Task',
                        meeting: activity.oppProActivityType == 'Meeting',
                        call: activity.oppProActivityType == 'Call',
                        proposal: activity.oppProActivityType == 'Proposal'
                      }"
                      >{{ activity.oppProActivityType }}</span
                    ></span
                  >
                </p>
              </mat-card-content>
            </mat-card>
          </div>
    
          <div
            fxFlex
            fxShow.xs
            fxShow.sm
            fxHide.gt-md
            fxHide.lt-xl
            fxHide.lg
            fxHide.lt-lg
            fxHide.md
            fxLayout="column"
            fxLayoutAlign="start stretch"
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              !isLoading &&
              !isError &&
              activitiesByGroup.ungrouped.length == 0 &&
              isSearchMode()
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="'../../../assets/images/ic_no_result.png'"
              [title]="'Sorry-We-Could-Not-Find-Any-Aesult' | translate"
              [subTitle]="'Maybe-Your-Search-Was-Too-Specific' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
    
          <div
          
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              !isLoading &&
              dataLoaded &&
              !isError &&
              activitiesByGroup.ungrouped.length === 0 &&
              !isSearchMode()
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="''"
              [title]="'No-Activities-Available' | translate"
              [subTitle]="'It-Seems-No-Activites-Created-For-You-Yet' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
    
          <div
            fxFlex
            fxLayout="column"
            fxLayoutAlign="start stretch"
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              dataLoaded &&
              !isLoading &&
              isError &&
              activitiesByGroup.ungrouped.length == 0
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="'../../../assets/images/ic_error.png'"
              [title]="'EMPTY-SCREEN.OOP-SOMETHING-WENT-WRONG' | translate"
              [subTitle]="'EMPTY-SCREEN.CHECK-YOUR-INTERNET-CONNECTION' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
    
          <div
            class="fill-bg"
            *ngIf="
              !isReloadingList &&
              dataLoaded &&
              !isLoading &&
              !isError &&
              activitiesByGroup.ungrouped.length === 0 &&
              isSearchMode()
            "
          >
            <xcdrs-detailed-panel-placeholder
              [imagePath]="'../../../assets/images/news-item/no-items.svg'"
              [title]="'Activity-Not-Found' | translate"
              [subTitle]="'Maybe-Your-Search-Was-Too-Specific' | translate"
            >
            </xcdrs-detailed-panel-placeholder>
          </div>
        </div>
      </div>
    
      <div
        fxFlex
        fxLayout="row"
        fxLayoutAlign="start center"
        *ngIf="!isListViewActive"
      >
        <div
          fxFlex
          fxLayout="column"
          fxLayoutAlign="space-around stretch"
          *ngIf="!isReloadingList && listReloaded"
        >
          <mat-card
            fxFlex
            fxLayout="row"
            fxLayoutAlign="start center"
            fxLayout.xs="column"
            fxLayoutAlign.xs="space-around stretch"
            fxLayout.sm="column"
            fxLayoutAlign.sm="space-around stretch"
            class="week-card"
            id="{{ 'week-' + week.weekName }}"
            *ngFor="
              let week of activitiesByGroup.weeksGroup.weeks;
              let index = index
            "
          >
            <div
              fxFlex
              fxLayout="row"
              fxLayoutAlign="start center"
              fxLayout.xs="column"
              fxLayoutAlign.xs="space-around stretch"
              fxLayout.sm="column"
              fxLayoutAlign.sm="space-around stretch"
            >
              <div
                fxFlex="50"
                fxLayout="column"
                fxLayoutAlign="space-around stretch"
              >
                <div>
                  <mat-label class="week-name" *ngIf="!isArabic"> {{ week.weekName }}</mat-label>
                  <mat-label class="week-name" *ngIf="isArabic && week.weekName != 'Previous Week' && week.weekName != 'This Week'"> 
                    {{ week.weekStartDateStr }} - {{ week.weekEndDateStr }}
                  </mat-label>
                  <mat-label class="week-name" *ngIf="isArabic && (week.weekName == 'Previous Week' || week.weekName == 'This Week')"> 
                    {{ week.weekName | translate }}
                  </mat-label>
                  <p class="week-start-end-dates">
                    {{ week.weekStartDateStr }} - {{ week.weekEndDateStr }}
                  </p>
                </div>
                <div
                  fxFlex
                  fxLayout="row"
                  fxLayoutAlign="start center"
                  fxLayout.xs="column"
                  fxLayoutAlign.xs="space-around stretch"
                  fxLayout.sm="column"
                  fxLayoutAlign.sm="space-around stretch"
                  class="week-data"
                >
                  <div class="efforrs">
                    <mat-label>{{ 'Efforts' | translate }}</mat-label>
                    <span class="efforts-val">
                      <span
                        [hidden]="
                          week.effortSumHours == 0 || week.effortSumHours == null
                        "
                        >{{ week.effortSumHours | numberPipe}}{{'HR' | translate}}&nbsp;
                      </span>
                      <span
                        [hidden]="
                          week.effortSumMinutes == 0 ||
                          week.effortSumMinutes == null
                        "
                        >{{ week.effortSumMinutes | numberPipe }}{{'MIN' | translate}}</span
                      >
                    </span>
                  </div>
                  <div class="activities">
                    <mat-label>{{'Activities' | translate}}</mat-label>
    
                    <span class="activities-val">{{ week.indicatorCount | numberPipe}}</span>
                  </div>
                  <div class="overdue">
                    <mat-label>{{'Overdue' | translate}}</mat-label>
                    <span class="overdue-val">{{ week.overdueCount | numberPipe}}</span>
                  </div>
                </div>
              </div>
              <div fxFlex="50" class="week-chart">
                <xcdrs-week-graph
                  id="{{ 'graph-' + index + 1 + '-' + week.weekNumber }}"
                  *ngIf="week.indicators.length > 0"
                  [indicators]="week.indicators"
                  [weekNumber]="week.weekNumber"
                  [weekIdx]="index + 1"
                ></xcdrs-week-graph>
              </div>
            </div>
          </mat-card>
        </div>
      </div>
    
      <!-- end groups accordion-->
    
      <!-- end card slider & search-->
    </div>
    <div class="fab-container" *ngIf="size == 'XS' || size == 'SM'">
      <button
        mat-fab
        color="primary"
        aria-label="create fab"
        fxFlex="nogrow"
        class="gradient-btn"
        type="submit"
        (click)="openCreateDialog('new', 'task')"
        *ngIf="!isOppProEnabled"
      >
        <mat-icon>add</mat-icon>
      </button>
      <xcdrs-speed-dial-fab
        *ngIf="isOppProEnabled"
        [fabButtons]="activityTypes"
        (clickedBtn)="openCreateDialog('new', $event.name)"
      ></xcdrs-speed-dial-fab>
    </div>
  </div>

  <div class="spinner-main-container"
  *ngIf="
      isReloadingList ||
      (!isReloadingList && !dataLoaded && isLoading) ||
      isLoadingMore
    ">
    <div
       class="spinner-container-test"
    >
      <mat-spinner></mat-spinner>
    </div>
  </div>
</div>
